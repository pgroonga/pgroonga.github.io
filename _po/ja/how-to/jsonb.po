msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Language: ja\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"PO-Revision-Date: 2023-08-13 09:53+0900\n"

msgid ""
"---\n"
"title: How to use on jsonb type column\n"
"---"
msgstr ""

msgid "# How to do full-text-search on `jsonb` type column"
msgstr ""

msgid "`jsonb` type comes from PostgreSQL 9.4, this document will help you to try use PGroonga on `jsonb` type."
msgstr ""

msgid "## Create table schema and index"
msgstr ""

msgid "Here is the sample to create a table with `jsonb` type:"
msgstr ""

msgid ""
"```sql\n"
"CREATE TABLE jsonb_table (\n"
"  id serial,\n"
"  data jsonb,\n"
"  PRIMARY KEY (id)\n"
");\n"
"```"
msgstr ""

msgid "Then create index on `jsonb`:"
msgstr ""

msgid ""
"Note that `pgroonga_jsonb_ops_v2` only supports less than **4KiB**\n"
"string data in a `jsonb` column; if not certain about the length of\n"
"`jsonb` data `pgroonga_jsonb_full_text_search_ops_v2` should be used\n"
"as index method."
msgstr ""

msgid ""
"```sql\n"
"CREATE INDEX pgroonga_index_jsonb_table_data ON jsonb_table\n"
"   USING pgroonga (\"data\" pgroonga_jsonb_full_text_search_ops_v2);\n"
"```"
msgstr ""

msgid "Let us add some data for test:"
msgstr ""

msgid ""
"```sql\n"
"INSERT INTO jsonb_table (data)\n"
"  VALUES ('{\"category\":\"server\"}');\n"
"INSERT INTO jsonb_table (data)\n"
"  VALUES ('{\"category\":\"user\"}');\n"
"INSERT INTO jsonb_table (data)\n"
"  VALUES ('{\"category\":\"server\"}');\n"
"INSERT INTO jsonb_table (data)\n"
"  VALUES ('{\"category\":\"user\", \"message\": \"user is logged in\"}');\n"
"```"
msgstr ""

msgid "Now you can use full text search by PGroonga on `data` column like below:"
msgstr ""

msgid ""
"```sql\n"
"SELECT id\n"
"  FROM jsonb_table\n"
" WHERE data &@ 'user';\n"
"--  id\n"
"-- ----\n"
"--   2\n"
"--   4\n"
"-- (2 rows)\n"
"```"
msgstr ""

msgid "## Score function on `jsonb` column"
msgstr ""

msgid "With `pgroonga_score(tableoid, ctid)` can get score of full `jsonb` column:"
msgstr ""

msgid ""
"```sql\n"
"SELECT id,\n"
"       pgroonga_score(tableoid, ctid) AS score\n"
"  FROM jsonb_table\n"
" WHERE data &@ 'user';\n"
"--  id | score\n"
"-- ----+-------\n"
"--   2 |     1\n"
"--   4 |     2\n"
"-- (2 rows)\n"
"```"
msgstr ""

msgid "If you want to score on specified JSON field, you must create index on that field:"
msgstr ""

msgid ""
"```sql\n"
"CREATE INDEX pgroonga_index_jsonb_title ON jsonb_table\n"
" USING pgroonga ((data->>'category'));\n"
"```"
msgstr ""

msgid "Note that `jsonb->>'field'` is `text` type and `jsonb->'field'` is `jsonb` type."
msgstr ""

msgid "With this index, you can get score on `jsonb` field:"
msgstr ""

msgid ""
"```sql\n"
"SELECT id,\n"
"       pgroonga_score(tableoid, ctid) AS score\n"
"  FROM jsonb_table\n"
" WHERE data->>'category' &@ 'user';\n"
"--  id | score\n"
"-- ----+-------\n"
"--   2 |     1\n"
"--   4 |     1\n"
"-- (2 rows)\n"
"```"
msgstr ""
