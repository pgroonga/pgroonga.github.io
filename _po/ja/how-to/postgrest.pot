msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

msgid ""
"---\n"
"title: How to use PGroonga with PostgREST\n"
"---"
msgstr ""

msgid "# How to use PGroonga with PostgREST"
msgstr ""

msgid "Create data in PostgreSQL, provide it as an API using PostgREST, and then easily create an **\"API for convenient data search\"**. This is a beginner's guide to PostgREST with PGroonga."
msgstr ""

msgid "## Prepare data on the PostgreSQL side"
msgstr ""

msgid "Here, we will use PostgreSQL, which is usually available on most computersğŸ˜"
msgstr ""

msgid ""
"```sh\n"
"createdb api\n"
"psql api\n"
"```"
msgstr ""

msgid "## Create a table and create suitable indexes"
msgstr ""

msgid "To make use of the convenient features of PGroonga, creating indexes that match the features is crucial."
msgstr ""

msgid "In this example, we will create a memo table and create indexes that enable the following search functionalities for each column:"
msgstr ""

msgid "- Treating hiragana and katakana as equivalent (searching for \"ã‚ã£ã·ã‚‹\" will match both \"ã‚ã£ã·ã‚‹\" and \"ã‚¢ãƒƒãƒ—ãƒ«\")."
msgstr ""

msgid "- Treating hiragana, katakana, and romaji as equivalent (searching for \"de-tabe-su\" will match \"de-tabe-su,\" \"ã§ãƒ¼ãŸã¹ãƒ¼ã™,\" and \"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹\")."
msgstr ""

msgid "- Treating various long vowel marks as equivalent (treating similar long vowel marks, such as \"-Ë—ÖŠâ€â€‘â€’â€“âƒâ»â‚‹âˆ’ ï¹£ï¼ ãƒ¼â€”â€•â”€â”ï½°,\" as the same for easier searching)."
msgstr ""

msgid "Now, let's try it out!"
msgstr ""

msgid ""
"```sql\n"
"CREATE EXTENSION IF NOT EXISTS pgroonga;"
msgstr ""

msgid ""
"CREATE TABLE memos (\n"
"  id integer,\n"
"  title text,\n"
"  content text\n"
");"
msgstr ""

msgid ""
"-- Please don't mind the randomness of the sample text ğŸ˜—\n"
"INSERT INTO memos VALUES (1, 'PostgreSQLã¯ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚','ã™ã”ã„ã§ã—ã‚‡ã†');\n"
"INSERT INTO memos VALUES (2, 'Groongaã¯æ—¥æœ¬èªå¯¾å¿œã®é«˜é€Ÿãªå…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚','ã‚¹ãƒ¯ã‚¤ã‚·ãƒ§ã‚¦');\n"
"INSERT INTO memos VALUES (3, 'PGroongaã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ã—ã¦Groongaã‚’ä½¿ã†ãŸã‚ã®PostgreSQLã®æ‹¡å¼µæ©Ÿèƒ½ã§ã™ã€‚','ãƒãƒãƒŠã‚¤ã‚¹ãƒ‡ãƒ¼');\n"
"INSERT INTO memos VALUES (4, 'groongaã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚','ä»Šæ—¥ã¯ã‚³ãƒ³ãƒãƒ³ãƒ¯ã“ã®ãã«ã‚');"
msgstr ""

msgid ""
"CREATE INDEX pgroonga_title_search_index ON memos USING pgroonga (title)\n"
"  WITH (\n"
"    normalizers = 'NormalizerNFKC150\n"
"      (\n"
"        \"unify_kana\", true,\n"
"        \"unify_to_romaji\", true,\n"
"        \"unify_hyphen_and_prolonged_sound_mark\", true\n"
"      )',\n"
"    tokenizer = 'TokenNgram(\"unify_symbol\", false, \"unify_alphabet\", false, \"unify_digit\", false)'\n"
"  );"
msgstr ""

msgid ""
"CREATE INDEX pgroonga_content_search_index ON memos USING pgroonga (content)\n"
"  WITH (\n"
"    normalizers = 'NormalizerNFKC150\n"
"      (\n"
"        \"unify_kana\", true,\n"
"        \"unify_to_romaji\", true,\n"
"        \"unify_hyphen_and_prolonged_sound_mark\", true\n"
"      )',\n"
"    tokenizer = 'TokenBigramSplitSymbolAlphaDigit'\n"
"  );\n"
"```"
msgstr ""

msgid "## Prepare PostgREST permissions"
msgstr ""

msgid "To create the necessary permissions for PostgREST, you can follow these steps:"
msgstr ""

msgid ""
"```sql\n"
"CREATE ROLE web_user nologin;\n"
"GRANT USAGE ON SCHEMA public TO web_user;\n"
"GRANT SELECT ON memos TO web_user;"
msgstr ""

msgid ""
"CREATE ROLE authenticator noinherit login password 'mypassword';\n"
"GRANT web_user to authenticator;\n"
"```"
msgstr ""

msgid "## Configure PostgREST"
msgstr ""

msgid ""
"```sh\n"
"vi memo.conf\n"
"```"
msgstr ""

msgid "Inside of the file:"
msgstr ""

msgid ""
"```vim\n"
"db-uri = \"postgres://authenticator:mypassword@localhost:5432/api\"\n"
"db-schemas = \"public\"\n"
"db-anon-role = \"web_user\"\n"
"```"
msgstr ""

msgid "## Start PostgREST"
msgstr ""

msgid ""
"```sh\n"
"postgrest memo.conf\n"
"```"
msgstr ""

msgid "Oh, for the installation method of PostgREST, please refer to https://postgrest.org/en/stable/explanations/install.html ğŸ˜‰"
msgstr ""

msgid "## Access the URL"
msgstr ""

msgid "Open your browser and access the following:"
msgstr ""

msgid "http://localhost:3000/memos"
msgstr ""

msgid "Result:"
msgstr ""

msgid ""
"```json\n"
"[\n"
"  {\"id\":1,\"title\":\"PostgreSQLã¯ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚\",\"content\":\"ã™ã”ã„ã§ã—ã‚‡ã†\"},\n"
"  {\"id\":2,\"title\":\"Groongaã¯æ—¥æœ¬èªå¯¾å¿œã®é«˜é€Ÿãªå…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚\",\"content\":\"ã‚¹ãƒ¯ã‚¤ã‚·ãƒ§ã‚¦\"},\n"
"  {\"id\":3,\"title\":\"PGroongaã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ã—ã¦Groongaã‚’ä½¿ã†ãŸã‚ã®PostgreSQLã®æ‹¡å¼µæ©Ÿèƒ½ã§ã™ã€‚\",\"content\":\"ãƒãƒãƒŠã‚¤ã‚¹ãƒ‡ãƒ¼\"},\n"
"  {\"id\":4,\"title\":\"groongaã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚\",\"content\":\"ä»Šæ—¥ã¯ã‚³ãƒ³ãƒãƒ³ãƒ¯ã“ã®ãã«ã‚\"}\n"
"]\n"
"```"
msgstr ""

msgid "What? Is it really this easy to have a working REST API endpoint? It's too convenient! ğŸ¤¯"
msgstr ""

msgid "(However, please note that due to the permissions set up in this case, you can only perform `SELECT` operations. So, you can search but not add, modify, or delete data. ğŸ˜)"
msgstr ""

msgid "## Regular LIKE search"
msgstr ""

msgid "This is the method to perform a `LIKE` search using the standard functionality of PostgreSQL."
msgstr ""

msgid "(By the way, normally, indexes do not work for PostgreSQL's partial match, but if you create an index with PGroonga, it will work. It's like magic! ğŸ‘€)"
msgstr ""

msgid "### Search by title"
msgstr ""

msgid "[`http://localhost:3000/memos?title=like.*ãƒ‡ãƒ¼ã‚¿*`](http://localhost:3000/memos?title=like.*ãƒ‡ãƒ¼ã‚¿*)"
msgstr ""

msgid ""
"```json\n"
"[{\"id\":1,\"title\":\"PostgreSQLã¯ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚\",\"content\":\"ã™ã”ã„ã§ã—ã‚‡ã†\"}]\n"
"```"
msgstr ""

msgid "### Search by content"
msgstr ""

msgid "[`http://localhost:3000/memos?content=like.*ã‚·ãƒ§ã‚¦*`](http://localhost:3000/memos?content=like.*ã‚·ãƒ§ã‚¦*)"
msgstr ""

msgid ""
"```json\n"
"[{\"id\":2,\"title\":\"Groongaã¯æ—¥æœ¬èªå¯¾å¿œã®é«˜é€Ÿãªå…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚\",\"content\":\"ã‚¹ãƒ¯ã‚¤ã‚·ãƒ§ã‚¦\"}]\n"
"```"
msgstr ""

msgid "â˜ï¸ With the standard LIKE search functionality, searching for 'ã‚·ãƒ§ã‚¦' in katakana will not match hiragana."
msgstr ""

msgid "## Searching with PGroonga"
msgstr ""

msgid "Now, since the operators `&@~` required for searching with PGroonga are not directly available in PostgREST, we will create a stored function to enable their usage."
msgstr ""

msgid ""
"```sh\n"
"psql api\n"
"```"
msgstr ""

msgid "Execute the following SQL statement:"
msgstr ""

msgid ""
"```sql\n"
"CREATE FUNCTION find_title(keywords text) RETURNS SETOF memos AS $$\n"
"BEGIN\n"
"  RETURN QUERY SELECT * FROM memos WHERE title &@~ keywords;\n"
"END;\n"
"$$ LANGUAGE plpgsql;"
msgstr ""

msgid ""
"CREATE FUNCTION find_content(keywords text) RETURNS SETOF memos AS $$\n"
"BEGIN\n"
"  RETURN QUERY SELECT * FROM memos WHERE content &@~ keywords;\n"
"END;\n"
"$$ LANGUAGE plpgsql;\n"
"```"
msgstr ""

msgid "## Searching with PGroonga in PostgREST"
msgstr ""

msgid "When calling stored functions in PostgREST, the URL format is `/rpc/function_name`."
msgstr ""

msgid "[`http://localhost:3000/rpc/find_title?keywords=ã‚³ãƒãƒ³ãƒ‰`](http://localhost:3000/rpc/find_title?keywords=ã‚³ãƒãƒ³ãƒ‰)"
msgstr ""

msgid "The following results will be returned."
msgstr ""

msgid ""
"```json\n"
"[{\"id\":4,\"title\":\"groongaã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚\",\"content\":\"ä»Šæ—¥ã¯ã‚³ãƒ³ãƒãƒ³ãƒ¯ã“ã®ãã«ã‚\"}]\n"
"```"
msgstr ""

msgid "By the way, using a browser to hit the URL is easier than using curl because dealing with encoding can be cumbersome."
msgstr ""

msgid ""
"```console\n"
"$ curl --get --data-urlencode keywords=ã‚³ãƒãƒ³ãƒ‰ http://localhost:3000/rpc/find_title\n"
"[{\"id\":4,\"title\":\"groongaã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚\",\"content\":\"ä»Šæ—¥ã¯ã‚³ãƒ³ãƒãƒ³ãƒ¯ã“ã®ãã«ã‚\"}]\n"
"```"
msgstr ""

msgid "### Search in romaji"
msgstr ""

msgid "[`http://localhost:3000/rpc/find_title?keywords=desu`](http://localhost:3000/rpc/find_title?keywords=desu)"
msgstr ""

msgid ""
"```json\n"
"[\n"
"  {\"id\":1,\"title\":\"PostgreSQLã¯ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚\",\"content\":\"ã™ã”ã„ã§ã—ã‚‡ã†\"},\n"
"  {\"id\":2,\"title\":\"Groongaã¯æ—¥æœ¬èªå¯¾å¿œã®é«˜é€Ÿãªå…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚\",\"content\":\"ã‚¹ãƒ¯ã‚¤ã‚·ãƒ§ã‚¦\"},\n"
"  {\"id\":3,\"title\":\"PGroongaã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ã—ã¦Groongaã‚’ä½¿ã†ãŸã‚ã®PostgreSQLã®æ‹¡å¼µæ©Ÿèƒ½ã§ã™ã€‚\",\"content\":\"ãƒãƒãƒŠã‚¤ã‚¹ãƒ‡ãƒ¼\"}\n"
"]\n"
"```"
msgstr ""

msgid "### Searching hiragana and katakana in hiragana or katakana"
msgstr ""

msgid "[`http://localhost:3000/rpc/find_content?keywords=ã‚·ãƒ§ã‚¦`](http://localhost:3000/rpc/find_content?keywords=ã‚·ãƒ§ã‚¦)"
msgstr ""

msgid ""
"```json\n"
"[\n"
"  {\"id\":1,\"title\":\"PostgreSQLã¯ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚\",\"content\":\"ã™ã”ã„ã§ã—ã‚‡ã†\"},\n"
"  {\"id\":2,\"title\":\"Groongaã¯æ—¥æœ¬èªå¯¾å¿œã®é«˜é€Ÿãªå…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚\",\"content\":\"ã‚¹ãƒ¯ã‚¤ã‚·ãƒ§ã‚¦\"}\n"
"]\n"
"```"
msgstr ""

msgid "### AND search"
msgstr ""

msgid "[`http://localhost:3000/rpc/find_title?keywords=nga ã§ã™`](http://localhost:3000/rpc/find_title?keywords=nga%20ã§ã™)"
msgstr ""

msgid ""
"```json\n"
"[\n"
"  {\"id\":2,\"title\":\"Groongaã¯æ—¥æœ¬èªå¯¾å¿œã®é«˜é€Ÿãªå…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚\",\"content\":\"ã‚¹ãƒ¯ã‚¤ã‚·ãƒ§ã‚¦\"},\n"
"  {\"id\":3,\"title\":\"PGroongaã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ã—ã¦Groongaã‚’ä½¿ã†ãŸã‚ã®PostgreSQLã®æ‹¡å¼µæ©Ÿèƒ½ã§ã™ã€‚\",\"content\":\"ãƒãƒãƒŠã‚¤ã‚¹ãƒ‡ãƒ¼\"}\n"
"]\n"
"```"
msgstr ""

msgid "### OR search"
msgstr ""

msgid "[`http://localhost:3000/rpc/find_title?keywords=nga OR ã§ã™`](http://localhost:3000/rpc/find_title?keywords=nga%20OR%20ã§ã™)"
msgstr ""

msgid ""
"```json\n"
"[\n"
"  {\"id\":2,\"title\":\"Groongaã¯æ—¥æœ¬èªå¯¾å¿œã®é«˜é€Ÿãªå…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚\",\"content\":\"ã‚¹ãƒ¯ã‚¤ã‚·ãƒ§ã‚¦\"},\n"
"  {\"id\":3,\"title\":\"PGroongaã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ã—ã¦Groongaã‚’ä½¿ã†ãŸã‚ã®PostgreSQLã®æ‹¡å¼µæ©Ÿèƒ½ã§ã™ã€‚\",\"content\":\"ãƒãƒãƒŠã‚¤ã‚¹ãƒ‡ãƒ¼\"},\n"
"  {\"id\":4,\"title\":\"groongaã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚\",\"content\":\"ä»Šæ—¥ã¯ã‚³ãƒ³ãƒãƒ³ãƒ¯ã“ã®ãã«ã‚\"},\n"
"  {\"id\":1,\"title\":\"PostgreSQLã¯ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚\",\"content\":\"ã™ã”ã„ã§ã—ã‚‡ã†\"}\n"
"]\n"
"```"
msgstr ""

msgid "### NOT search"
msgstr ""

msgid "[`http://localhost:3000/rpc/find_title?keywords=nga -pg`](http://localhost:3000/rpc/find_title?keywords=nga%20-pg)"
msgstr ""

msgid ""
"```json\n"
"[\n"
"  {\"id\":2,\"title\":\"Groongaã¯æ—¥æœ¬èªå¯¾å¿œã®é«˜é€Ÿãªå…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚\",\"content\":\"ã‚¹ãƒ¯ã‚¤ã‚·ãƒ§ã‚¦\"}, \n"
"  {\"id\":4,\"title\":\"groongaã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚\",\"content\":\"ä»Šæ—¥ã¯ã‚³ãƒ³ãƒãƒ³ãƒ¯ã“ã®ãã«ã‚\"}\n"
"]\n"
"```"
msgstr ""

msgid "## Bonus"
msgstr ""

msgid "When you want to allow various additional searches, you can create multiple stored functions."
msgstr ""

msgid "### Make target column customizable"
msgstr ""

msgid "Here is an example of a stored function that performs a dynamic search by passing the column name:"
msgstr ""

msgid ""
"```sql\n"
"CREATE OR REPLACE FUNCTION search_col(column_name text, keyword text)\n"
"  RETURNS SETOF memos\n"
"  LANGUAGE plpgsql\n"
"AS $$\n"
"BEGIN\n"
"  IF column_name IN ('title', 'content') THEN -- Check if the column name is valid\n"
"    RETURN QUERY EXECUTE format('SELECT * FROM memos WHERE %I &@~ ''%s''', column_name, keyword);\n"
"  ELSE\n"
"    RAISE EXCEPTION 'Invalid column name'; -- Return an error if the column name is invalid\n"
"  END IF;\n"
"END;\n"
"$$;\n"
"CREATE FUNCTION\n"
"```"
msgstr ""

msgid "###  Search all columns"
msgstr ""

msgid "Stored function to search all columns with a keyword:"
msgstr ""

msgid ""
"```sql\n"
"CREATE OR REPLACE FUNCTION memo_search(keyword text)\n"
"  RETURNS SETOF memos\n"
"  LANGUAGE plpgsql\n"
"AS $$\n"
"BEGIN\n"
"  RETURN QUERY EXECUTE format('\n"
"    SELECT *\n"
"    FROM memos\n"
"    WHERE title &@~ $1 OR content &@~ $1\n"
"  ') USING keyword;\n"
"END;\n"
"$$;\n"
"```"
msgstr ""

msgid "## Keyword-Based Content Search"
msgstr ""

msgid "At times, you may want to conduct a search solely using keywords, rather than specifying particular fields. Let's explore how you can accomplish this."
msgstr ""

msgid "Consider a personal library stored in a database table `books`:"
msgstr ""

msgid ""
"```sql\n"
"CREATE TABLE books (\n"
"  id INTEGER,\n"
"  title TEXT,\n"
"  author TEXT\n"
");"
msgstr ""

msgid ""
"INSERT INTO books VALUES (1, 'Adventures of Sherlock Holmes', 'Arthur Conan Doyle');\n"
"INSERT INTO books VALUES (2, 'The Hound of the Baskervilles', 'Arthur Conan Doyle');\n"
"INSERT INTO books VALUES (3, 'The Memoirs of Sherlock Holmes', 'Arthur Conan Doyle');\n"
"INSERT INTO books VALUES (4, 'The Lion, the Witch, and the Wardrobe', 'C. S. Lewis');\n"
"```"
msgstr ""

msgid "Suppose you want to find books with the author name containing 'Conan Doyle' and titles that include 'Sherlock'. Normally, you would execute the following SQL query:"
msgstr ""

msgid ""
"```sql\n"
"SELECT * FROM books WHERE author LIKE '%Conan Doyle%' and title LIKE '%Sherlock%';\n"
"-- id |             title              |       author       \n"
"-- ----+--------------------------------+--------------------\n"
"--   1 | Adventures of Sherlock Holmes  | Arthur Conan Doyle\n"
"--   3 | The Memoirs of Sherlock Holmes | Arthur Conan Doyle\n"
"-- (2 rows)\n"
"```"
msgstr ""

msgid "However, if you're aiming for a Google-like keyword search experience, you would want to achieve the same results with a keyword string such as 'conan doyle sherlock'."
msgstr ""

msgid "### Creating an Special Index for Keyword-based Search"
msgstr ""

msgid "To create this functionality, you will need to design multiple array indexes. Here's how you can proceed:"
msgstr ""

msgid ""
"```sql\n"
"CREATE INDEX pg_multi_book_index on books USING pgroonga\n"
"\t((ARRAY[title, author]) pgroonga_text_array_full_text_search_ops_v2)\n"
"\tWITH (\n"
"    normalizers = 'NormalizerNFKC150\n"
"      (\n"
"        \"unify_kana\", true,\n"
"        \"unify_to_romaji\", true,\n"
"        \"unify_hyphen_and_prolonged_sound_mark\", true\n"
"      )',\n"
"    tokenizer = 'TokenNgram(\"unify_symbol\", false, \"unify_alphabet\", false, \"unify_digit\", false)'\n"
"  );\n"
"```"
msgstr ""

msgid "### Creating a Stored Function for Keyword-Based Search"
msgstr ""

msgid "To emulate a Google-like search experience within your database, you can create a stored function that accepts a keyword and returns the relevant records from the `books` table:"
msgstr ""

msgid ""
"```sql\n"
"CREATE OR REPLACE FUNCTION gsearch(keyword text)\n"
"  RETURNS SETOF books\n"
"  LANGUAGE plpgsql\n"
"AS $$\n"
"BEGIN\n"
"  RETURN QUERY EXECUTE format('\n"
"    SELECT *\n"
"    FROM books\n"
"    WHERE ARRAY[title, author] &@~ $1\n"
"  ') USING keyword;\n"
"END;\n"
"$$;\n"
"```"
msgstr ""

msgid "### Adding New Permission to the books Table"
msgstr ""

msgid "You'll also need to grant the appropriate permissions to allow users to access the books table. Use the following SQL command:"
msgstr ""

msgid ""
"```sql\n"
"GRANT SELECT ON books TO web_user;\n"
"```"
msgstr ""

msgid "### Search Example Using a Browser"
msgstr ""

msgid "Now, you can perform a keyword-based search directly from your web browser. Simply navigate to the following URL:"
msgstr ""

msgid "[`http://localhost:3000/rpc/gsearch?keyword=conan doyle sherlock`](http://localhost:3000/rpc/gsearch?keyword=conan%20doyle%20sherlock)"
msgstr ""

msgid ""
"```json\n"
"[\n"
"  {\"id\":1,\"title\":\"Adventures of Sherlock Holmes\",\"author\":\"Arthur Conan Doyle\"}, \n"
"  {\"id\":3,\"title\":\"The Memoirs of Sherlock Holmes\",\"author\":\"Arthur Conan Doyle\"}\n"
"]\n"
"```"
msgstr ""

msgid "This seamless and user-friendly approach to searching through your data with keywords is both practical and exciting. It's a fantastic way to enhance your search capabilities, don't you think?"
msgstr ""

msgid "## Using Keyword Auto Complete"
msgstr ""

msgid "PGroonga has features to implement auto complete which is explained in [the auto complete how to section][auto-complete]."
msgstr ""

msgid "Here we will explore how to implement this using PostgREST and just a simple HTML with JavaScript."
msgstr ""

msgid "### Create Table for Auto Complete Feature"
msgstr ""

msgid ""
"```sql\n"
"CREATE TABLE terms (\n"
"  term text,\n"
"  readings text[]\n"
");"
msgstr ""

msgid ""
"CREATE INDEX pgroonga_terms_prefix_search ON terms USING pgroonga\n"
"  (readings pgroonga_text_array_term_search_ops_v2);"
msgstr ""

msgid ""
"CREATE INDEX pgroonga_terms_full_text_search ON terms USING pgroonga\n"
"  (term)\n"
"  WITH (tokenizer = 'TokenBigramSplitSymbolAlphaDigit');"
msgstr ""

msgid ""
"INSERT INTO terms (term, readings) VALUES ('ç‰›ä¹³', ARRAY['ã‚®ãƒ¥ã‚¦ãƒ‹ãƒ¥ã‚¦', 'ãƒŸãƒ«ã‚¯']);\n"
"INSERT INTO terms (term, readings) VALUES ('PostgreSQL', ARRAY['ãƒã‚¹ã‚°ãƒ¬', 'posugure', 'postgres']);\n"
"INSERT INTO terms (term, readings) VALUES ('Groonga', ARRAY['guru-nga', 'ã‚°ãƒ«ãƒ³ã‚¬','ãã‚‹ã‚“ãŒ','gurunga']);\n"
"INSERT INTO terms (term, readings) VALUES ('PGroonga', ARRAY['pi-ji-runga', 'ãƒ”ãƒ¼ã‚¸ãƒ¼ãƒ«ãƒ³ã‚¬','ã´ãƒ¼ã˜ãƒ¼ã‚‹ã‚“ãŒ','pg','ãƒ”ãƒ¼ã‚¸ãƒ¼']);\n"
"```"
msgstr ""

msgid "### Set Up PostgREST Permission"
msgstr ""

msgid ""
"```sql\n"
"GRANT SELECT ON terms TO web_user;\n"
"```"
msgstr ""

msgid "### Create Auto Complete End Point"
msgstr ""

msgid ""
"```sql\n"
"CREATE OR REPLACE FUNCTION autocomplete(keyword text) RETURNS SETOF text AS $$\n"
"DECLARE\n"
"  result text[];\n"
"BEGIN\n"
"  IF keyword = '' THEN\n"
"    RETURN QUERY SELECT unnest(result);\n"
"  ELSE\n"
"    RETURN QUERY SELECT term FROM terms WHERE readings &^~ keyword;\n"
"  END IF;\n"
"END;\n"
"$$ LANGUAGE plpgsql;\n"
"```"
msgstr ""

msgid "### Create a HTML with JavaScript"
msgstr ""

msgid "Create following HTML file:"
msgstr ""

msgid ""
"```sh\n"
"vi index.html\n"
"```"
msgstr ""

msgid ""
"```html\n"
"<!DOCTYPE html>\n"
"<html>\n"
"  <head>\n"
"    <meta charset=\"UTF-8\">\n"
"    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n"
"    <title>PGroonga Auto Complete Search</title>\n"
"    <link rel=\"stylesheet\"\n"
"          href=\"https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/css/autoComplete.min.css\">\n"
"    <style>\n"
"        .center-container {\n"
"            display: flex;\n"
"            justify-content: center;\n"
"            align-items: center;\n"
"            min-height: 100vh;\n"
"        }\n"
"    </style>\n"
"  </head>\n"
"  <body>\n"
"    <div class=\"center-container\">\n"
"        <form name=\"search\" id=\"searchForm\">\n"
"            <input type=\"search\" size=\"60\" maxlength=\"60\" name=\"key\" id=\"autoComplete\">\n"
"        </form>"
msgstr ""

msgid ""
"        <script src=\"https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/autoComplete.min.js\">\n"
"        </script>\n"
"        <script type=\"text/javascript\">\n"
"            const searchForm = document.getElementById('searchForm');"
msgstr ""

msgid ""
"            searchForm.addEventListener('submit', async (event) => {\n"
"                event.preventDefault();\n"
"                const query = document.getElementById('autoComplete').value;"
msgstr ""

msgid ""
"                if (query.length === 0) {\n"
"                    return;\n"
"                }"
msgstr ""

msgid ""
"                const params = new URLSearchParams({keywords: query});\n"
"                const response = await fetch(`http://localhost:3000/rpc/find_title?${params.toString()}`);\n"
"                const result = await response.json();"
msgstr ""

msgid ""
"                const preElement = document.getElementById('output');\n"
"                if (result.length > 0) {\n"
"                    const formattedValue = JSON.stringify(result, null, 2);\n"
"                    preElement.textContent = formattedValue;\n"
"                } else {\n"
"                    preElement.textContent = 'No results found';\n"
"                }\n"
"            });"
msgstr ""

msgid ""
"            const dataSource = async (query) => {\n"
"                const params = new URLSearchParams({keyword: query});\n"
"                const source = await fetch(`http://localhost:3000/rpc/autocomplete?${params.toString()}`);\n"
"                return await source.json();\n"
"            };"
msgstr ""

msgid ""
"            const autoCompleteJS = new autoComplete({\n"
"                placeHolder: \"Enter a keyword\",\n"
"                data: {\n"
"                    src: dataSource\n"
"                },\n"
"                searchEngine: (query, record) => record,\n"
"                events: {\n"
"                    input: {\n"
"                        selection: (event) => {\n"
"                            const selection = event.detail.selection.value;\n"
"                            autoCompleteJS.input.value = selection;\n"
"                        }\n"
"                    }\n"
"                },\n"
"                submit: true\n"
"            });\n"
"        </script>\n"
"        <pre id=\"output\"></pre>\n"
"    </div>\n"
"  </body>\n"
"</html>\n"
"```"
msgstr ""

msgid "### Run PostgREST as API backend"
msgstr ""

msgid "Run your PostgREST service using following command:"
msgstr ""

msgid "### Open html and Try Out"
msgstr ""

msgid "Open `index.html` with your browser."
msgstr ""

msgid "![PGroonga Auto Complete1](../images/postgrest/auto-complete1.png)"
msgstr ""

msgid "Type something and it will show the suggestions."
msgstr ""

msgid "![PGroonga Auto Complete2](../images/postgrest/auto-complete2.png)"
msgstr ""

msgid "When you press `Search` button, it will performe keyword search on memos table title data."
msgstr ""

msgid "![PGroonga Auto Complete3](../images/postgrest/auto-complete3.png)"
msgstr ""

msgid "[auto-complete]: auto-complete.html"
msgstr ""
